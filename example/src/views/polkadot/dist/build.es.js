import{web3Accounts as n,web3FromSource as t,web3Enable as e}from"@polkadot/extension-dapp";import i from"decimal.js";import{stringToHex as o}from"@polkadot/util";import{WsProvider as r,ApiPromise as s}from"@polkadot/api";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function c(n,t,e,i){return new(e||(e=Promise))((function(o,r){function s(n){try{a(i.next(n))}catch(n){r(n)}}function c(n){try{a(i.throw(n))}catch(n){r(n)}}function a(n){n.done?o(n.value):new e((function(t){t(n.value)})).then(s,c)}a((i=i.apply(n,t||[])).next())}))}class a{constructor(n){this.code=n.code,this.data=n.data,this.message=n.message}}class d{constructor(n,t,e){this.code=n,this.message=t,this.data=e}}const u={SUCCESS:n=>new d(0,"success",n),DEFAULT_STATE:n=>new d(1,"default state",n),ERROR_STATE:n=>new d(4,"error state",n),NOT_SUPPORT:n=>new d(5,"The method is not supported",n)};class l{getAccount(){return c(this,void 0,void 0,(function*(){const t=yield n();return new a(u.SUCCESS(t))}))}}class v{getBalance(n){return c(this,void 0,void 0,(function*(){const{nonce:t,data:e}=yield window.api.query.system.account(n);let o=yield new i(""+e.free).div(new i(Math.pow(10,10))).toString();return new a(u.SUCCESS(o))}))}}class w{getBlock(n){return c(this,void 0,void 0,(function*(){const t=yield window.api.rpc.chain.getBlockHash(n),e=yield window.api.rpc.chain.getBlock(t);let i=JSON.parse(""+e.block.header);return new a(u.SUCCESS(i))}))}}class h{getBlockNumber(){return c(this,void 0,void 0,(function*(){const n=yield window.api.rpc.chain.getHeader();return new a(u.SUCCESS(""+n.number))}))}}class g{getTransaction(n){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class S{getTransactionCount(n){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class T{sendSignedTransaction(e,o){return c(this,void 0,void 0,(function*(){const r=(yield n())[0];let s=yield new i(o).mul(new i(Math.pow(10,10))).toString();const c=window.api.tx.balances.transfer(e,s),d=yield t(r.meta.source),l=yield d.signer;return new Promise((n,t)=>{c.signAndSend(r.address,{signer:l},({status:t})=>{t.isInBlock?(console.log("Completed at block hash #"+t.asInBlock.toString()),n(new a(u.SUCCESS(t.asInBlock.toString())))):console.log("Current status: "+t.type)}).catch(n=>{console.log(":( transaction failed",n),t(new a(u.ERROR_STATE(null)))})})}))}}class f{signWithPrivateKey(n,t){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class y{signWithWallet(e){return c(this,void 0,void 0,(function*(){const i=(yield n())[0],r=(yield t(i.meta.source)).signer.signRaw,s=i.address;if(r){const{signature:n}=yield r({address:s,data:o(e),type:"bytes"});return new a(u.SUCCESS(n))}return new a(u.ERROR_STATE(null))}))}}class p{signTransaction(n,t){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class C{signTransactionPrivateKey(n,t){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class P{sendTransaction(n){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class m{loadContract(n,t){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class O{constructor(){}getAccount(){return c(this,void 0,void 0,(function*(){return yield(new l).getAccount()}))}getBalance(n){return c(this,void 0,void 0,(function*(){return yield(new v).getBalance(n)}))}getBlock(n){return c(this,void 0,void 0,(function*(){return yield(new w).getBlock(n)}))}getBlockNumber(){return c(this,void 0,void 0,(function*(){return yield(new h).getBlockNumber()}))}getTransaction(n){return c(this,void 0,void 0,(function*(){return yield(new g).getTransaction(n)}))}getTransactionCount(n){return c(this,void 0,void 0,(function*(){return yield(new S).getTransactionCount(n)}))}sendSignedTransaction(n,t){return c(this,void 0,void 0,(function*(){return yield(new T).sendSignedTransaction(n,t)}))}signWithWallet(n){return c(this,void 0,void 0,(function*(){return yield(new y).signWithWallet(n)}))}signWithPrivateKey(n,t){return c(this,void 0,void 0,(function*(){return yield(new f).signWithPrivateKey(n,t)}))}signTransaction(n,t){return c(this,void 0,void 0,(function*(){return yield(new p).signTransaction(n,t)}))}signTransactionPrivateKey(n,t){return c(this,void 0,void 0,(function*(){return yield(new C).signTransactionPrivateKey(n,t)}))}sendTransaction(n){return c(this,void 0,void 0,(function*(){return yield(new P).sendTransaction(n)}))}loadContract(n,t){return c(this,void 0,void 0,(function*(){return yield(new m).loadContract(n,t)}))}}class R{link(){return c(this,void 0,void 0,(function*(){yield e("my cool dapp");const t=yield n();return new a(u.SUCCESS(t))}))}}class U{offChainCall(n,t,e,i,o){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}onChainCall(n,t,e,i){return c(this,void 0,void 0,(function*(){return new a(u.NOT_SUPPORT(null))}))}}class k{constructor(){this.actions=new O,this.connector=new R,this.contract=new U}init(n){return c(this,void 0,void 0,(function*(){const t=new r(n);return window.api=yield s.create({provider:t}),new a(u.SUCCESS(window.api))}))}}export{k as Actions,u as PredefinedStatus};
//# sourceMappingURL=build.es.js.map
